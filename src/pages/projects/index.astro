---
import { getCollection } from "astro:content";
import { Icon } from "astro-icon/components";
import PageLayout from "@/layouts/Base.astro";

const allProjects = await getCollection("project");

const meta = {
	description: "Projects I've built",
	title: "Projects",
};
---

<PageLayout meta={meta}>
	<h1 class="title mb-12">Projects</h1>
	<ul class="space-y-8">
		{
			allProjects.map((project) => (
				<li class="border-b border-gray-200 pb-8 dark:border-gray-700">
					<a href={`/projects/${project.id}/`} class="group block">
						<h2 class="title text-xl group-hover:text-accent">{project.data.title}</h2>
						<p class="mt-2 text-gray-600 dark:text-gray-400">{project.data.description}</p>
						<div class="mt-3 flex flex-wrap gap-2">
							{project.data.tech.map((t: string) => (
								<span class="rounded bg-gray-100 px-2 py-1 text-xs dark:bg-gray-800">{t}</span>
							))}
						</div>
					</a>
					{project.data.github && (
						<a
							href={project.data.github}
							target="_blank"
							rel="noreferrer"
							class="mt-3 inline-flex items-center gap-1 text-sm text-gray-500 hover:text-accent"
						>
							<Icon name="mdi:github" class="h-4 w-4" />
							View on GitHub
						</a>
					)}
				</li>
			))
		}
	</ul>
</PageLayout>
